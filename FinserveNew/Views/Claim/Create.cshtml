@model FinserveNew.Models.Claim

@{
    ViewData["Title"] = "Create New Claim";
}

<div class="page-title">Create New Claim</div>

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<div class="form-container">
    <form asp-action="Create" method="post" enctype="multipart/form-data">
        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

        <!-- Claim Type -->
        <div class="mb-3">
            <label asp-for="ClaimType" class="form-label">Claim Type</label>
            <select asp-for="ClaimType" class="form-select">
                <option value="">Select claim type...</option>
                <option value="Travel">Travel</option>
                <option value="Medical">Medical</option>
                <option value="Equipment">Equipment</option>
                <option value="Training">Training</option>
                <option value="Entertainment">Entertainment</option>
                <option value="Other">Other</option>
            </select>
            <span asp-validation-for="ClaimType" class="text-danger"></span>
        </div>

        <!-- Claim Amount -->
        <div class="mb-3">
            <label asp-for="ClaimAmount" class="form-label">Claim Amount</label>
            <div class="input-group">
                <span class="input-group-text">RM</span>
                <input asp-for="ClaimAmount" class="form-control" type="number" step="0.01" min="0" placeholder="0.00" />
            </div>
            <span asp-validation-for="ClaimAmount" class="text-danger"></span>
        </div>

        @* <!-- Remark -->
        <div class="mb-3">
            <label asp-for="Remark" class="form-label">Remark</label>
            <textarea asp-for="Remark" class="form-control" rows="4" placeholder="business travel on behalf company to meet ABC company's client from 3-5 April 2025"></textarea>
            <span asp-validation-for="Remark" class="text-danger"></span>
        </div> *@

        <!-- Upload Supporting Document -->
        <div class="mb-4">
            <label class="form-label">Upload Supporting Document</label>
            <div class="input-group">
                <input type="file" name="supportingDocument" class="form-control" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                <label class="input-group-text">petrol receipt.png</label>
            </div>
            <small class="form-text text-muted">Accepted formats: PDF, JPG, PNG, DOC, DOCX (Max 5MB)</small>
        </div>

        <!-- Submit Button -->
        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-paper-plane me-2"></i>
                Submit Claim
            </button>
            <a asp-action="Index" class="btn btn-outline-secondary">
                <i class="fas fa-times me-2"></i>
                Cancel
            </a>
        </div>
    </form>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        // Preview selected file name
        document.querySelector('input[type="file"]').addEventListener('change', function(e) {
            const fileName = e.target.files[0]?.name || 'petrol receipt.png';
            document.querySelector('.input-group-text').textContent = fileName;
        });
    </script>
}