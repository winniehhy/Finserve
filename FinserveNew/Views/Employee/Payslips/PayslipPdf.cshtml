@model FinserveNew.Models.Payroll
@{
    Layout = null; // No layout for PDF generation
    var monthName = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(Model.Month);
    var totalDeductions = Model.EmployeeEpf + Model.EmployeeSocso + Model.EmployeeEis + Model.EmployeeTax;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payslip - @Model.Employee.FirstName @Model.Employee.LastName - @monthName @Model.Year</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .company-info {
            text-align: left;
            width: 50%;
        }

        .company-name {
            color: #4a6fdc;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .company-address {
            font-size: 12px;
            color: #666;
            margin: 0;
        }

        .payslip-title {
            color: #4a6fdc;
            font-size: 30px;
            font-weight: bold;
            text-align: right;
        }

        .payslip-date {
            color: #4a6fdc;
            font-size: 18px;            
            font-weight: bold;
            text-align: right;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

            table.info td {
                padding: 5px 0;
            }

            table.details {
                border: 1px solid #ddd;
            }

                table.details th, table.details td {
                    border: 1px solid #ddd;
                    padding: 8px;
                    width: 50%;
                }

                table.details th {
                    background-color: #f5f5f5;
                    text-align: left;
                }

                    table.details th.text-end {
                        text-align: right;
                    }

                    table.details th:first-child, table.details td:first-child {
                        width: 60%; /* Description column slightly wider */
                    }

                    table.details th:last-child, table.details td:last-child {
                        width: 40%; /* Amount column slightly narrower */
                    }

        .text-end {
            text-align: right;
        }

        .table-secondary {
            background-color: #e2e3e5;
        }

        .footer {
            margin-top: 30px;
            border-top: 1px solid #ddd;
            padding-top: 20px;
            color: #666;
            font-size: 12px;
        }

        .summary-row {
            background-color: #e2e3e5;
        }

        .summary-label, .summary-amount {
            text-align: right;
            font-weight: bold;
            padding: 10px 8px;
        }

        .summary-amount {
            background-color: #d1e7dd;
        }

        .total-row td {
            text-align: right;
            font-weight: bold;
            background-color: #e2e3e5;
        }
    </style>
</head>
<body>
    <div class="container">
        <table style="margin-bottom: 50px">
            <tr>
                <td class="company-info">
                    <div class="company-name">CubicSoftware Solution</div>
                    <p class="company-address">123 Business Avenue, Kuala Lumpur, Malaysia</p>
                    <p class="company-address">Phone: +60 3 1234 5678, Email: info@cubicsoftware.my</p>
                </td>
                <td>
                    <div class="payslip-title">PAYSLIP</div>
                    <div class="payslip-date">@monthName @Model.Year</div>
                </td>
            </tr>
        </table>

        <h3>Employee Information</h3>
        <table class="info">
            <tr>
                <td width="30%">Employee Name:</td>
                <td><strong>@Model.Employee.FirstName @Model.Employee.LastName</strong></td>
            </tr>
            <tr>
                <td>Employee ID:</td>
                <td>@Model.EmployeeID</td>
            </tr>
            <tr>
                <td>Position:</td>
                <td>@Model.Employee.Position</td>
            </tr>
            <tr>
                <td>EPF Number:</td>
                <td>@Model.Employee.EPFNumber</td>
            </tr>
            <tr>
                <td>Income Tax Number:</td>
                <td>@Model.Employee.IncomeTaxNumber</td>
            </tr>
        </table>

        <table class="details">
            <thead>
                <tr>
                    <th>Earnings</th>
                    <th class="text-end">Amount (RM)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Basic Salary</td>
                    <td class="text-end">@Model.BasicSalary.ToString("N2")</td>
                </tr>
                <tr class="total-row">
                    <td>GROSS PAY</td>
                    <td>RM @Model.BasicSalary.ToString("N2")</td>
                </tr>
            </tbody>
        </table>

        <table class="details">
            <thead>
                <tr>
                    <th>Deductions</th>
                    <th class="text-end">Amount (RM)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>EPF (11%)</td>
                    <td class="text-end">@Model.EmployeeEpf.ToString("N2")</td>
                </tr>
                <tr>
                    <td>SOCSO</td>
                    <td class="text-end">@Model.EmployeeSocso.ToString("N2")</td>
                </tr>
                <tr>
                    <td>EIS</td>
                    <td class="text-end">@Model.EmployeeEis.ToString("N2")</td>
                </tr>
                <tr>
                    <td>Income Tax</td>
                    <td class="text-end">@Model.EmployeeTax.ToString("N2")</td>
                </tr>
                <tr class="total-row">
                    <td>TOTAL DEDUCTIONS</td>
                    <td>RM @totalDeductions.ToString("N2")</td>
                </tr>
            </tbody>
        </table>

        <table class="details">
            <tr class="summary-row">
                <td class="summary-label">NET PAY</td>
                <td class="summary-label">RM @Model.TotalWages.ToString("N2")</td>
            </tr>
        </table>

        <div class="footer">
            <p>This is an electronic payslip and does not require a signature. Generated on @DateTime.Now.ToString("dd MMM yyyy HH:mm")</p>
        </div>
    </div>
</body>
</html>
